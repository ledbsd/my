Метки

    label_replace

Функция позволяет добавить новую метку на основании уже имеющихся. Это удобно, когда вы агрегируете данные из разных источников, где метки имеют одинаковый смысл, а их названия различаются. Например, запрос label_replace(up, "replace", "${1}", "job", "(.*)") вернет: up{instance="localhost:9090",job="prometheus",replace="prometheus"}

    label_join

Позволяет объединять значения нескольких меток в одну. Например, запрос label_join(up, "join", "-", "job", "instance") вернет: up{instance="localhost:9090",job="prometheus",join="prometheus-localhost:9090"}

Важно! label_join и label_replace не удаляют имена метрик.
Пропущенные серии

    absent

Функция возвращает пустой вектор, если переданный ей вектор содержит значения. В противном случае она возвращает 1.
Сортировки

    sort

Функция позволяет отсортировать значения в возвращаемом векторе. Сортировка производится по возрастанию.

    sort_desc

Функция позволяет отсортировать значения в возвращаемом векторе. Сортировка производится по убыванию.

Агрегация во времени

<aggregation>_over_time()

Следующие функции позволяют агрегировать каждую серию заданного диапазона вектора во времени и возвращать мгновенный вектор с результатами агрегации для каждой серии:

    avg_over_time

Функция возвращает среднее значение всех точек в указанном интервале.

    min_over_time

Функция возвращает минимальное значение всех точек в указанном интервале.

    max_over_time

Функция возвращает максимальное значение всех точек в указанном интервале.

    sum_over_time

Функция возвращает сумму всех значений в указанном интервале.

    count_over_time

Функция возвращает количество всех значений в указанном интервале.

    quantile_over_time

Функция возвращает φ-квантиль (0 ≤ φ ≤ 1) значений в указанном интервале.

    stddev_over_time

Функция возвращает стандартное отклонение совокупности значений в указанном интервале.

    stdvar_over_time

Функция возвращает стандартную дисперсию совокупности значений в указанном интервале.